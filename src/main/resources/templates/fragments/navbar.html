<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
</head>
<body>

<!-- NAVBAR FRAGMENT -->
<nav th:fragment="navbar" class="navbar">
    <a href="/" class="navbar-brand">
        <span>ðŸ“š</span>
        <span>BookStore</span>
    </a>

    <ul class="navbar-menu">
        <li><a href="/books" class="navbar-link">Books</a></li>

        <!-- FOR GUESTS (not authenticated) -->
        <li sec:authorize="!isAuthenticated()">
            <a href="/login" class="navbar-link">Login</a>
        </li>
        <li sec:authorize="!isAuthenticated()">
            <a href="/register" class="navbar-link navbar-link-register">Register</a>
        </li>

        <!-- FOR CLIENTS -->
        <li sec:authorize="hasRole('CLIENT')">
            <a href="/orders" class="navbar-link">My Orders</a>
        </li>

        <!-- FOR EMPLOYEES -->
        <li sec:authorize="hasRole('EMPLOYEE')">
            <a href="/books/manage/add" class="navbar-link">Add Book</a>
        </li>
        <li sec:authorize="hasRole('EMPLOYEE')">
            <a href="/orders/manage" class="navbar-link">Manage Orders</a>
        </li>

        <!-- FOR AUTHENTICATED USERS -->
        <li sec:authorize="isAuthenticated()" class="navbar-user">
            <span class="navbar-email" sec:authentication="name"></span>
            <form th:action="@{/logout}" method="post" style="display: inline;">
                <button type="submit" class="navbar-link navbar-link-logout">Logout</button>
            </form>
        </li>
    </ul>
</nav>

</body>
</html>